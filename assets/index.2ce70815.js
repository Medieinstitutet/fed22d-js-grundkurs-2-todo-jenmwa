(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function d(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();let n=[];const y=document.querySelector(".tasks"),u=document.querySelector("#inputTaskField"),m=document.querySelector("#deadlineInput"),T=document.querySelector("#submit"),D=document.querySelector("#resetAll"),p=document.querySelector("#sortSection"),k=document.querySelector("#taskError"),c=new Date,B=document.querySelector("#todaysDate");B.innerHTML=c.toLocaleDateString();document.querySelector("#deadlineInput").valueAsDate=c;function q(){const e=localStorage.getItem("taskList");e&&(n=JSON.parse(e),a(n))}function i(){localStorage.setItem("taskList",JSON.stringify(n))}function b(e){if(e.preventDefault(),u.value.length===0||m.value===""){k.innerHTML="Fyll i Todo & deadline!";return}if(u.value.length>=2&&m!=""){k.innerHTML="";const o=document.querySelector("input[name='category']:checked").value;let t={task:u.value,deadline:m.value,addedDate:new Date().toString(),category:o,isComplete:!1};n.push(t),a(n),u.value="",m.value=""}}function a(e){i(),y.innerHTML="";for(let t=0;t<e.length;t++){let s=function(){const S=new Date(e[t].deadline),v=new Date(c.getFullYear(),c.getMonth(),c.getDate()+5);S<c?console.log(e[t].deadline+" deadline har passerat"):S<=v&&console.log(e[t].deadline+" deadline \xE4r inom 5 dagar")};var o=s;const d=e[t].isComplete?"todochecked":"",r=e[t].isComplete?"toggled":"",l=e[t].isComplete?"checked":"";s(),y.innerHTML+=`
        <li class="todo" data-id="${t}">
          <div class="licontainer">
            <label for= "${e[t].task}">
              <input type="checkbox" name="checkbox" class="checkbox ${r}" ${l} data-id="${t}">
              <span class="text texttodo ${d}">${e[t].task}</span><br>
              <span class="text deadlineStatus ${d}"> ${e[t].deadline}</span>
            </label>
          </div>
          <div class="rightsection">
            <span class="material-symbols-outlined category">${e[t].category}</span>
            <button class="material-symbols-outlined" aria-label="ta bort todo" data-id="${t}">close</button>
          </div>
          </li>`}E(),C()}function C(){Array.from(document.querySelectorAll(".tasks button")).forEach(t=>{t.addEventListener("click",M)}),Array.from(document.querySelectorAll(".tasks input")).forEach(t=>{t.addEventListener("change",x)})}function x(e){const o=n[e.currentTarget.dataset.id];console.log(n[e.currentTarget.dataset.id]),e.target.checked?(o.isComplete=!0,e.currentTarget.nextElementSibling.classList.add("todochecked"),e.target.classList.add("toggled"),e.target.classList.add("checked")):(o.isComplete=!1,e.currentTarget.nextElementSibling.classList.remove("todochecked"),e.target.classList.remove("toggled"),e.target.classList.remove("checked")),i(),F()}function E(){n.length<=1&&(p.classList.remove("open"),document.querySelector("#sortByText").innerHTML=" "),n.length>=2&&p.classList.add("open")}function M(e){const o=e.currentTarget.dataset.id;o>-1&&(n.splice(o,1),a(n))}let f=!0,g=!0;const I=document.querySelector("#sortByDateBtn"),$=document.querySelector("#sortByNameBtn"),H=document.querySelector("#sortByDeadlineBtn");function N(e){e.preventDefault(),document.querySelector("#sortByText").innerHTML="inlagt datum",n.sort((o,t)=>o.addedDate<t.addedDate?-1:o.addedDate>t.addedDate?1:0),i(),a(n)}function A(e){e.preventDefault(),document.querySelector("#sortByText").innerHTML="bokstavsordning",f?(n.sort((o,t)=>o.task.localeCompare(t.task)),f=!1):f===!1&&(n.sort((o,t)=>t.task.localeCompare(o.task)),f=!0),i(),a(n)}function w(e){e.preventDefault(),document.querySelector("#sortByText").innerHTML="deadline",g?(n.sort((o,t)=>t.deadline.localeCompare(o.deadline)),g=!1):g===!1&&(n.sort((o,t)=>o.deadline.localeCompare(t.deadline)),g=!0),i(),a(n)}function F(){n.sort((e,o)=>e.isComplete<o.isComplete?-1:e.isComplete>o.isComplete?1:0),i(),a(n)}I.addEventListener("click",N);$.addEventListener("click",A);H.addEventListener("click",w);function O(e){e.preventDefault(),console.log("klick"),y.innerHTML="",p.classList.remove("open"),localStorage.clear()}const L=document.querySelector("body"),h=document.querySelector(".light-mode-icon");function J(){L.classList.toggle("change"),L.classList.contains("change")?h.textContent="dark_mode":h.textContent="light_mode"}T.addEventListener("click",b);D.addEventListener("click",O);h.addEventListener("click",J);q();
