(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();let o=[];const y=document.querySelector(".tasks"),d=document.querySelector("#inputTaskField"),u=document.querySelector("#deadlineInput"),h=document.querySelector("#submit"),p=document.querySelector("#sortSection"),S=document.querySelector("#taskError"),c=new Date,L=document.querySelector("#todaysDate");L.innerHTML=c.toLocaleDateString();function v(){console.log(localStorage.getItem("taskList"));const t=localStorage.getItem("taskList");t&&(o=JSON.parse(t),a(o))}function B(t){if(t.preventDefault(),d.value.length===0||u.value===""){S.innerHTML="Fyll i Todo & deadline!";return}if(d.value.length>=2&&u!=""){S.innerHTML="";const e=document.querySelector("input[name='category']:checked").value;let n={task:d.value,deadline:u.value,addedDate:new Date().toString(),category:e,isComplete:!1};o.push(n),a(o),d.value="",u.value=""}}h.addEventListener("click",B);function a(t){localStorage.setItem("taskList",JSON.stringify(t)),y.innerHTML="";for(let e=0;e<t.length;e++){const n=t[e].isComplete?"todochecked":"",i=t[e].isComplete?"toggled":"",r=t[e].isComplete?"checked":"";y.innerHTML+=`
        <li class="todo" data-id="${e}">
          <div class="licontainer">
            <label for= "${t[e].task}">
              <input type="checkbox" name="checkbox" class="checkbox ${i}" ${r} data-id="${e}">
              <span class="text ${n}" id="texttodo">${t[e].task}</span><br>
              <span class="text ${n}"> ${t[e].deadline}</span>
              <span id="test"></span>
            </label>
          </div>
          <div class="rightsection">
            <span class="material-symbols-outlined category">${t[e].category}</span>
            <button class="material-symbols-outlined" aria-label="ta bort todo" data-id="${e}">close</button>
          </div>
        </li>`;const s=new Date(t[e].deadline),l=new Date(c.getFullYear(),c.getMonth(),c.getDate()+5);s<c?console.log("deadline har passerat"):s<=l&&console.log("deadline \xE4r inom 5 dagar")}b(),D()}function D(){Array.from(document.querySelectorAll(".tasks button")).forEach(n=>{n.addEventListener("click",q)}),Array.from(document.querySelectorAll(".tasks input")).forEach(n=>{n.addEventListener("change",T)})}function T(t){const e=o[t.currentTarget.dataset.id];t.target.checked?(e.isComplete=!0,t.currentTarget.nextElementSibling.classList.add("todochecked"),t.target.classList.add("toggled"),t.target.classList.add("checked")):(e.isComplete=!1,t.currentTarget.nextElementSibling.classList.remove("todochecked"),t.target.classList.remove("toggled"),t.target.classList.remove("checked")),localStorage.setItem("taskList",JSON.stringify(o)),O()}function b(){o.length<=1&&(p.classList.remove("open"),document.querySelector("#sortByText").innerHTML=" "),o.length>=2&&p.classList.add("open")}function q(t){const e=t.currentTarget.dataset.id;e>-1&&(o.splice(e,1),a(o))}let m=!0,f=!0;const C=document.querySelector("#sortByDateBtn"),I=document.querySelector("#sortByNameBtn"),x=document.querySelector("#sortByDeadlineBtn");function E(t){t.preventDefault(),document.querySelector("#sortByText").innerHTML="inlagt datum",o.sort((e,n)=>e.addedDate<n.addedDate?-1:e.addedDate>n.addedDate?1:0),localStorage.setItem("taskList",JSON.stringify(o)),a(o)}function N(t){t.preventDefault(),document.querySelector("#sortByText").innerHTML="bokstavsordning",m?(o.sort((e,n)=>e.task.localeCompare(n.task)),m=!1):m===!1&&(o.sort((e,n)=>n.task.localeCompare(e.task)),m=!0),localStorage.setItem("taskList",JSON.stringify(o)),a(o)}function M(t){t.preventDefault(),document.querySelector("#sortByText").innerHTML="deadline",f?(o.sort((e,n)=>n.deadline.localeCompare(e.deadline)),f=!1):f===!1&&(o.sort((e,n)=>e.deadline.localeCompare(n.deadline)),f=!0),localStorage.setItem("taskList",JSON.stringify(o)),a(o)}function O(){o.sort((t,e)=>t.isComplete<e.isComplete?-1:t.isComplete>e.isComplete?1:0),localStorage.setItem("taskList",JSON.stringify(o)),a(o)}C.addEventListener("click",E);I.addEventListener("click",N);x.addEventListener("click",M);const k=document.querySelector("body"),g=document.querySelector(".light-mode-icon");function $(){k.classList.toggle("change"),k.classList.contains("change")?g.textContent="dark_mode":g.textContent="light_mode"}g.addEventListener("click",$);v();
